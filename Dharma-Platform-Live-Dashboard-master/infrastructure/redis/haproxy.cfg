global
    daemon
    log stdout local0 info
    maxconn 4096
    user haproxy
    group haproxy

defaults
    mode tcp
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option tcplog
    log global

# Redis Cluster Frontend
frontend redis_frontend
    bind *:6379
    mode tcp
    default_backend redis_cluster

# Redis Cluster Backend
backend redis_cluster
    mode tcp
    balance roundrobin
    option tcp-check
    tcp-check send PING\r\n
    tcp-check expect string +PONG
    
    server redis-node-1 redis-node-1:7000 check inter 5s rise 2 fall 3
    server redis-node-2 redis-node-2:7000 check inter 5s rise 2 fall 3
    server redis-node-3 redis-node-3:7000 check inter 5s rise 2 fall 3
    server redis-node-4 redis-node-4:7000 check inter 5s rise 2 fall 3
    server redis-node-5 redis-node-5:7000 check inter 5s rise 2 fall 3
    server redis-node-6 redis-node-6:7000 check inter 5s rise 2 fall 3

# Statistics
listen stats
    bind *:8404
    mode http
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if TRUE